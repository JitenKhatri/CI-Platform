@using CI_Platform.Models.ViewModels
@{
    Layout = null;
    var UserName = ViewBag.UserName;
}
@model List<MissionViewModel>


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mission-listing</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link href="~/css/landing.css" rel="stylesheet" />
  </head>

  <body>
    <div class="container-fluid p-0">
      <div class="row header">
        <div class="col d-flex flex-row justify-content-center">
          <a href="#" class="mx-1 mx-sm-4">Stories</a>
          <div class="dropdown">
            <button class="dropdown-toggle" type="button" data-bs-toggle="dropdown">
              Policy <img src="~/images/drop-down.png" class="mx-2" />
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Action</a></li>
              <li><a class="dropdown-item" href="#">Another action</a></li>
              <li><a class="dropdown-item" href="#">Something else here</a></li>
            </ul>
          </div>
        </div>
        <div class="col p-0">
          <div class="dropdown">
            <button
              class="dropdown-toggle profile"
              type="button"
              data-bs-toggle="dropdown" >
              <img src="~/images/user-img.png" class="profileimg" />
              <span class="mx-2 d-none d-sm-block">@ViewBag.UserName</span>
              <img
                src="~/images/drop-down.png"
                class="mx-1 drop-down d-none d-sm-block"
              />
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">My Profile</a></li>
              <li><a class="dropdown-item" href="#">Help</a></li>
              <li><a class="dropdown-item" href="login.html">Logout</a></li>
            </ul>
          </div>
        </div>
      </div>


      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <form class="d-flex my-2 my-lg-0">
                <button type="button" class="btn">
                  <img src="~/images/search.png" alt="search" />
                </button>
                <input onkeyup="search()" id="search-input"
                  class="form-control" 
                  type="text"
                  placeholder="Search mission ..."
                  aria-label="Search"
                  style="border:none;"
                />
              </form>
            </li>
          </ul>
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <button class="dropdown-toggle" type="button" id="countryDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                Country <img src="~/images/drop-down.png" class="mx-2">
              </button>
              <div class="dropdown-menu" aria-labelledby="countryDropdown">
                            @foreach(var country in ViewBag.CountryList)
             {
                   <div id="country">
        <input type="checkbox" id="@country.Text" class="form-check-input" onchange="addcountries('@country.Text')" data-value="@country.Text">
        <label for="@country.Text">@country.Text</label>
                  </div>
             }
              </div>
            </li>
            <li class="nav-item dropdown">
              <button class="dropdown-toggle" type="button" id="cityDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                City <img src="~/images/drop-down.png" class="mx-2">
              </button>
              <div class="dropdown-menu city" aria-labelledby="cityDropdown">
                 @foreach(var city in ViewBag.CityList)
                {
                                            <div>
        <input type="checkbox" id="@city.Text" class="form-check-input" onchange="addcities('@city.Text')" data-value="@city.Text">
        <label for="@city.Text">@city.Text</label>
    </div>
           @* <a id='@city.Text' class="dropdown-item" href="#" onchange='addcities()' data-value="@city.Text">@city.Text</a>*@
                }
               
              </div>
            </li>
            <li class="nav-item dropdown">
              <button class="dropdown-toggle" type="button" id="themeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                Theme <img src="~/images/drop-down.png" class="mx-2">
              </button>
              <div class="dropdown-menu" aria-labelledby="themeDropdown">
                      @foreach(var theme in ViewBag.ThemeList)
                     {
                       <div class = "theme">
                  <input type="checkbox" id="@theme.Text" class="form-check-input" onchange="addthemes('@theme.Text')" data-value="@theme.Text">
                  <label for="@theme.Text">@theme.Text</label>
                   </div>
                   }

             
            </li>
            <li class="nav-item dropdown">
              <button class="dropdown-toggle" type="button" id="skillDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                Skills <img src="~/images/drop-down.png" class="mx-2">
              </button>
              <div class="dropdown-menu" aria-labelledby="skillDropdown">
                 @foreach(var skill in ViewBag.SkillList)
        {
                  <div class = "skill">
                  <input type="checkbox" id="@skill.Text" class="form-check-input" onchange="addskills('@skill.Text')" data-value="@skill.Text">
                  <label for="@skill.Text">@skill.Text</label>
                   </div>
        }
              </div>
            </li>
            <li class="nav-item">
              <button type="button" class="btn" id="clear-all-btn">Clear All</button>
            </li>
          </ul>
        </div>
      </nav>
      
      <!-- Selected items row -->
      <div class="container">
        <div id="selected-items-row">
        </div>
      </div>
<!-- Explore mission row -->
      <div class="row explore">
         <div class="col">
          <h2>Explore <strong>@Model.Count Missions</strong></h2>
          </div>
        
        <div class="col d-flex flex-row justify-content-end ">
            <div class="p-0 d-flex flex-row me-2">
                <div class="dropdown">
             <button class="sortby" type="button" data-bs-toggle="dropdown">
                 
                  <span class="">Sort by</span>
                  <img src="~/images/drop-down.png" class="mx-0 mx-sm-2" />

             <ul class="dropdown-menu">
            <li> <a id="sort-by-start-date" onclick="sortby('Newest')" class="dropdown-item" href="#">Newest</a></li>
             <li> <a class="dropdown-item" onclick = "sortby('Oldest')" href="#">Oldest</a></li>
               <li> <a class="dropdown-item" onclick="sortby('Seats_ascending')" href="#">Lowest available seats</a></li>
               <li> <a class="dropdown-item" onclick="sortby('Seats_descending')" href="#">Highest available seats</a></li>
               <li> <a class="dropdown-item" onclick="sortby('deadline')" href="#">Registration deadline</a></li>
              </ul>
              </button>
              </div>
                
            </div>
           
              <button class="btn btn-grid "><img src="~/images/grid.png"  /></button>
              <button class="btn btn-list "><img src="~/images/list.png" /></button>
              
            
        </div>
        </div>
     
        
        <!-- mission-list 2 -->

        <div class="container-fluid grid-container">


       <div class="row missions">

           @foreach(var mission in Model)
          {
                    <div class="col-12 col-md-6 col-lg-4 mission-card">              
              <div class="card">
                <div class="img-event">
                  <img class="card-img-top" src=@mission.image?.MediaPath alt="Card image cap">
                  <div class="location-img">
                    <img class="text-light" src="~/images/pin.png" alt="">
                        <span class="text-light"> @mission.Missions?.City.Name</span>
                    </div>
                    <button class="like-img border-0">
                        <img class="text-light" src="~/images/heart.png" alt="">
                    </button>
                    <button class="stop-img border-0">
                        <img class="text-light" src="~/images/add1.png" alt="">
                    </button>
                    <button class="mission-theme border-0">
                    <span class="p-2">@mission.Missions?.Theme.Title</span>
                    </button>
                </div>
                <div class="card-body">
                  <h5 class="card-title">@mission.Missions?.Title</h5>
                  <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore...</p>
                  <div class="d-flex justify-content-between">
                    <div><p class="slug">@mission.Missions?.OrganizationName</p></div>
                    <div class="d-flex flex-row">
                      <img class="star" src="~/images/selected-star.png" alt="">
                      <img  class="star" src="~/images/selected-star.png" alt="">
                      <img  class="star" src="~/images/selected-star.png" alt="">
                      <img  class="star" src="~/images/star-empty.png" alt="">
                      <img  class="star" src="~/images/star-empty.png" alt="">
                    </div>
                  </div>
                  <div class="duration-seats-info mt-4">
                    <div class="duration">
                        @if(@mission.Missions?.StartDate !=null && @mission.Missions?.EndDate !=null)
                        {
                                    <p id="duration-txt" style="margin-bottom: 0;">
                          
                          From @mission.Missions?.StartDate?.ToString().Substring(0,10)  until @mission.Missions?.EndDate?.ToString().Substring(0,10)
                          </p>
                        }
                        else {
                            <p id="duration-txt" style="margin-bottom: 0;">
                                @mission.Missions?.GoalMotto
                                </p>
                        }
                      
                    </div> 
                    <div class="d-flex flex-row mission-deadline">
                                        @if(@mission.Missions?.SeatsLeft != null)
                                        {
                                         <div class="d-flex flex-row">
                        <div><img src="~/images/Seats-left.png" alt=""> </div>
                        <div><span>@mission.Missions?.SeatsLeft<br> Seats left</span></div>
                      </div> 
                                        }
                         
                      <div class="d-flex flex-row">
                          @if(mission.Missions?.MissionType == "TIME")
                          {
                                        <div><img src="~/images/deadline.png" alt=""></div >
                          }
                       
                        <div class="ms-2 p-bar"> 
                            
                            @if (mission.Missions?.Deadline != null)
                            {
                                 <span>@mission.Missions?.Deadline.ToString().Substring(0,10) <br> Deadline </span>
                            } else
                            {
                                   @if (mission.Missions?.MissionType =="GO")
                                   {
                                                         <div class="d-flex flex-column">
                                                     <div class="d-flex flex-row"><img class="align-self-center ms-3" src="~/images/mission.png" alt="" style="height:25px; width:25px;">
                                               <div class="progress align-self-center ms-3">
                                             <div class="progress-bar w-75" role="progressbar" aria-label="Basic example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div></div>
                                     <div><p>8000 achieved</p></div>                    
                                                        </div>
                                    }else
                                    {
                                        <span>@mission.Missions?.GoalMotto</span>
                                     }
                                                    
                            }
                        </div>
                      </div>
                      
                    </div>
                    
                  </div> 
                  <div class="d-flex justify-content-center mt-4">
                    <button class="apply-btn">
                      Apply <span><img src="~/images/right-arrow.png" alt=""></span>
                    </button>
                  </div>  
                </div>
              </div>
            </div> 
        }

                
            

          </div> @*row ends*@
          
        </div>
      </div>
     @* no mission found*@
          <div class="page-not-found text-center" style="display:none;">
        <!-- <img src="images/404-Page-image.png" alt="" class="w-25"> -->
        <h4 class="pt-2">No mission found</h4>
        <!-- <p class="description" style="font-size: 2rem !important;"><strong>Oops! </strong> The page you were looking for doesn't exist.</p>
        <p style="font-size: 1.2rem;">you may have misstyped the address or the page have moved.</p>-->
        <div class="d-flex justify-content-center mt-4">
            <button class="applyButton btn">Go to Homepage <img src="images/right-arrow.png" alt="">
            </button>
        </div>
    </div>
  @*Pagination*@
         <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item pe-2">
          <a class="page-link">Previous</a>
        </li>
        <li class="page-item pe-2 active"><a class="page-link" href="#">1</a></li>
        <li class="page-item pe-2"><a class="page-link" href="#">2</a></li>
        <li class="page-item pe-2"><a class="page-link" href="#">3</a></li>
        <li class="page-item pe-2"><a class="page-link" href="#">4</a></li>
        <li class="page-item pe-2"><a class="page-link" href="#">5</a></li>
        <li class="page-item pe-2">
          <a class="page-link" href="#">Next</a>
        </li>
      </ul>
    </nav>    
  
  
  </div>

      
      </div>
      @*mission not found*@
      
    
   
    <footer> <a class="text-muted" style="    margin-left: 10%;
    text-decoration: none;" asp-controller"Home" asp-action="Privacy"> Privacy policy</a></footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="~/js/site.js"></script>
  </body>

</html>


  
      